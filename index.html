<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Calculator</title>
    <style>
        /* body {
            background-color: rgb(255, 238, 0);
        }

        .m-parent {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
        }

        .parent {
            border: 2px solid black;
            background-color: black;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            height: 570px;
            width: 500px;
            border-radius: 15px;
        }

        #child1 {
            border: 2px solid rgb(208, 183, 183);
            border-radius: 5px;
            height: 85px;
            width: 460px;
            background-color: rgb(255, 255, 255);
            margin-top: 5px;
            margin-bottom: 1px;
            text-align: right;
            font-size: 50px;

        }

        #child1:hover {
            box-shadow: 8px 8px 8px rgb(255, 200, 0);
        }

        .calculator-display {
            width: 200px;
            height: 50px;
            text-align: right;
            white-space: nowrap;
            overflow: hidden;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            border: 1px solid black;
            padding: 10px;
        }

        .calculator-display .shrink {
            font-size: 16px;
            /* Reduce font size when content overflows */
        /* } */

        /* .child2 {
            height: 370px;
            width: 460px;
            margin-top: 5px;
            margin-bottom: 1px;
        }

        .child3 {
            height: 65px;
            width: 460px;
            margin-top: 1px;
            margin-bottom: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        button {
            height: 50px;
            width: 70px;
            margin: 10px;
            margin-left: 30px;
            margin-top: 15px;
            background-color: rgb(255, 0, 0);
            border: 2px solid rgb(15, 7, 232);
            border-radius: 6px;
            font-size: 25px;
            box-shadow: 6px 7px 20px transparent;
            cursor: pointer;
        }

        button:hover {
            font-size: 27px;
            box-shadow: 5px 5px 5px white;
        }

        .row1 {
            margin: 10px;
            margin-left: 30px;
            margin-top: 15px;
            border-radius: 6px;
            font-size: 25px;
            cursor: pointer;
        } */

        /* .last-row {
            margin: 10px;
            margin-left: 30px;
            margin-top: 15px;
            border-radius: 6px;
            font-size: 25px;
            cursor: pointer;
        } */

        /* .equal {
            background-color: rgb(0, 17, 255);
            border: 2px solid rgb(143, 186, 176);
            border-radius: 60px;
            width: 455px;
            font-size: 47px;
            text-align: center;
        }

        .equal:hover {
            font-size: 49px;

        }

        .white {
            background-color: rgb(255, 155, 4);
        }

        .operators {
            background-color: red;
            font-size: 25px;
        } */

        @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');

        body {
            background-color: #111;
            font-family: 'Orbitron', sans-serif;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .m-parent {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
        }

        .parent {
            border: 2px solid cyan;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            height: 570px;
            width: 500px;
            border-radius: 15px;
            box-shadow: 0 0 20px cyan;
        }

        #child1 {
            border: 2px solid magenta;
            border-radius: 5px;
            height: 85px;
            width: 460px;
            background-color: black;
            color: cyan;
            font-size: 50px;
            text-align: right;
            padding: 10px;
            box-shadow: 0 0 10px magenta;
        }

        button {
            height: 52px;
            width: 73px;
            margin: 10px;
            background-color: black;
            border: 2px solid cyan;
            border-radius: 6px;
            font-size: 25px;
            color: cyan;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 0 10px cyan;
        }

        button:hover {
            font-size: 27px;
            box-shadow: 0 0 20px cyan;
            transform: scale(1.1);
        }

        .white {
            background-color: black;
            color: lime;
            border-color: lime;
            box-shadow: 0 0 10px lime;
        }

        .white:hover {
            box-shadow: 0 0 20px lime;
        }

        .operators {
            background-color: black;
            color: magenta;
            border-color: magenta;
            box-shadow: 0 0 10px magenta;
        }

        .operators:hover {
            box-shadow: 0 0 20px magenta;
        }

        .equal {
            background-color: black;
            color: yellow;
            border-color: yellow;
            box-shadow: 0 0 15px yellow;
            border-radius: 60px;
            width: 455px;
            font-size: 47px;
        }

        .equal:hover {
            box-shadow: 0 0 25px yellow;
            font-size: 49px;
        }

        .child2,
        .child3 {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="m-parent">
        <div class="parent">
            <div class="calculator-display" id="child1">0</div>
            <div class="child2">
                <button class="row1" onclick="del()">DEL</button>
                <button class="row1" onclick="calculatePercentage()">%</button>
                <button class="row1" onClick="squareNumber()">x²</button>
                <button class="row1" onclick="clea()">C</button>
                <button class="last-row white" onclick="setVlue(this)" data-value="00">00</button>
                <button class="white" onclick="setVlue(this)" data-value="1">1</button>
                <button class="white" onclick="setVlue(this)" data-value="2">2</button>
                <button class="white" onclick="setVlue(this)" data-value="3">3</button>
                <button class="white" onclick="setVlue(this)" data-value="4">4</button>
                <button class="white" onclick="setVlue(this)" data-value="5">5</button>
                <button class="white" onclick="setVlue(this)" data-value="6">6</button>
                <button class="white" onclick="setVlue(this)" data-value="7">7</button>
                <button class="white" onclick="setVlue(this)" data-value="8">8</button>
                <button class="white" onclick="setVlue(this)" data-value="9">9</button>
                <button class="last-row white" onclick="setVlue(this)" data-value="0">0</button>

                <button class="last-row white" onclick="dot()">.</button>
                <button class="last-row operators" onclick="plu()">+</button>
                <button class="operators" onclick="sub()">-</button>
                <button class="operators" onclick="mul()">x</button>
                <button class="operators" onclick="setVlue(this)"  data-value="/"> ÷ </button><br><br>
            </div>
            <div class="child3">
                <button class="equal" onclick="calculateResult()">===</button>
            </div>
        </div>
    </div>



    <script>



       

        let display = document.getElementById('child1');

       
        function doubleZero() {
            let display = document.getElementById("child1");

            // Prevent "00" when the display is just "0"
            if (display.innerText === "0") return;

            display.innerHTML += "00"
        }

        function dot() {
            let display = document.getElementById("child1");

            // Get the last number entered (split by operators)
            let lastNumber = display.innerText.split(/[\+\-\*\/]/).pop();

            // Prevent adding another dot if the last number already contains one
            if (lastNumber.includes(".")) return;

            display.innerHTML += `.`;
        }

        function clea() {
            display.innerHTML = '0'
        }




        if (display.scrollWidth > display.clientWidth) {
            display.classList.add("shrink");
        }
        function squareNumber() {
            let display = document.getElementById("child1");
            if (display.innerText) {
                display.innerText = Math.pow(eval(display.innerText), 2);
            }
        }

        //operators functions

        function plu() {
            display.innerHTML += `+`
        }

        function sub() {
            display.innerHTML += `-`
        }

        function divide() {
            display.innerHTML += `/`
        }

        function mul() {
            display.innerHTML += `*`
        }

        function del() {
            var text = display.textContent;

            var arr = Array.from(text);
            arr.pop()

            var str = arr.join("");

            display.innerHTML = str

            if (display.textContent.length == 0) {
                display.innerHTML = '0';
            }


        }

        function calculateResult() {
            try {
                var tex = document.getElementById('child1').innerText;
                var res = eval(tex)
                document.getElementById('child1').innerHTML = res;
            } catch (error) {
                document.getElementById('child1').innerText = 'Error';
            }
        }

        function calculatePercentage() {
            let display = document.getElementById("child1");
            let expression = display.innerText;

            // If the expression is empty, do nothing
            if (!expression) return;

            // Convert last entered number into percentage
            let lastNumberMatch = expression.match(/(\d+\.?\d*)$/); // Get last number
            if (lastNumberMatch) {
                let lastNumber = parseFloat(lastNumberMatch[0]);
                let percentageValue = lastNumber / 100; // Convert to percentage
                display.innerText = expression.replace(/(\d+\.?\d*)$/, percentageValue);
            }
        }


        function setVlue(el) {
            if (display.innerText == '0') {
                display.innerHTML = ''
            }
            var value = el.dataset.value;
            display.innerHTML += value
        }
    </script>
</body>

</html>
